{
  "test_samples": {
    "sample_1_create_lead_bayut": {
      "description": "Create lead from Bayut source with referrer agent",
      "endpoint": "POST /api/v1/leads/capture",
      "request_body": {
        "source_type": "bayut",
        "lead_data": {
          "first_name": "Ahmed",
          "last_name": "Al Mansouri",
          "email": "ahmed.mansouri@example.com",
          "phone": "+971501234567",
          "nationality": "UAE",
          "language_preference": "arabic",
          "budget_min": 800000,
          "budget_max": 1500000,
          "property_type": "apartment",
          "preferred_areas": ["Dubai Marina", "Jumeirah"]
        },
        "source_details": {
          "campaign_id": "bayut_summer_campaign",
          "utm_source": "google",
          "referrer_agent_id": "d7c0279d-3009-44b8-a917-2056a152fd9f"
        }
      },
      "expected_response": "Returns lead_id, assigned_agent, lead_score, next_follow_up"
    },
    "sample_2_create_lead_website": {
      "description": "Create lead from website source (luxury villa)",
      "endpoint": "POST /api/v1/leads/capture",
      "request_body": {
        "source_type": "website",
        "lead_data": {
          "first_name": "Fatima",
          "last_name": "Al-Zahra",
          "email": "fatima.zahra@example.com",
          "phone": "+971507654321",
          "nationality": "UAE",
          "language_preference": "english",
          "budget_min": 2000000,
          "budget_max": 3500000,
          "property_type": "villa",
          "preferred_areas": ["Palm Jumeirah", "Emirates Hills"]
        },
        "source_details": {
          "campaign_id": "website_luxury_campaign",
          "utm_source": "facebook"
        }
      },
      "expected_response": "Returns lead_id, assigned_agent, lead_score, next_follow_up"
    },
    "sample_3_agent_dashboard": {
      "description": "Check agent dashboard for performance metrics",
      "endpoint": "GET /api/v1/agents/{agent_id}/dashboard",
      "path_params": {
        "agent_id": "d7c0279d-3009-44b8-a917-2056a152fd9f"
      },
      "query_params": {
        "date_range": "last_30_days",
        "status_filter": "active",
        "source_filter": "website"
      },
      "expected_response": "Returns agent summary, recent leads, pending tasks, performance metrics"
    },
    "sample_4_update_lead_status": {
      "description": "Update lead status and add activity with follow-up",
      "endpoint": "PUT /api/v1/leads/{lead_id}/update",
      "path_params": {
        "lead_id": "USE_LEAD_ID_FROM_SAMPLE_1_RESPONSE"
      },
      "request_body": {
        "status": "contacted",
        "activity": {
          "type": "call",
          "notes": "Discussed budget requirements and preferred locations. Client is very interested in Dubai Marina apartments with sea view.",
          "outcome": "positive",
          "next_follow_up": "2026-02-20T14:00:00Z"
        },
        "property_interests": [
          {
            "property_id": "550e8400-e29b-41d4-a716-446655440000",
            "interest_level": "high"
          }
        ]
      },
      "expected_response": "Returns {\"success\": true}"
    },
    "sample_5_test_duplicate_error": {
      "description": "Test duplicate lead detection (use same phone as Sample 1)",
      "endpoint": "POST /api/v1/leads/capture",
      "request_body": {
        "source_type": "bayut",
        "lead_data": {
          "first_name": "Ahmed",
          "last_name": "Al Mansouri",
          "email": "ahmed.mansouri@example.com",
          "phone": "+971501234567",
          "nationality": "UAE",
          "language_preference": "arabic",
          "budget_min": 800000,
          "budget_max": 1500000,
          "property_type": "apartment",
          "preferred_areas": ["Dubai Marina"]
        },
        "source_details": {
          "campaign_id": "duplicate_test"
        }
      },
      "expected_response": "Returns error: {\"detail\":\"Duplicate lead detected\",\"type\":\"duplicate_lead\"}"
    },
    "bonus_sample_invalid_budget": {
      "description": "Test invalid data validation (budget_min > budget_max)",
      "endpoint": "POST /api/v1/leads/capture",
      "request_body": {
        "source_type": "website",
        "lead_data": {
          "first_name": "Test",
          "last_name": "User",
          "email": "test@example.com",
          "phone": "+971501234568",
          "nationality": "UAE",
          "language_preference": "english",
          "budget_min": 2000000,
          "budget_max": 1000000,
          "property_type": "apartment",
          "preferred_areas": ["Dubai Marina"]
        },
        "source_details": {}
      },
      "expected_response": "Returns error: {\"detail\":\"budget_min must be less than budget_max\",\"type\":\"invalid_lead_data\"}"
    },
    "bonus_sample_invalid_status_transition": {
      "description": "Test invalid status transition (new -> converted directly)",
      "endpoint": "PUT /api/v1/leads/{lead_id}/update",
      "path_params": {
        "lead_id": "USE_LEAD_ID_FROM_SAMPLE_2_RESPONSE"
      },
      "request_body": {
        "status": "converted"
      },
      "expected_response": "Returns error: {\"detail\":\"Cannot transition from new to converted\",\"type\":\"invalid_status_transition\"}"
    }
  },
  "testing_flow": [
    "1. Run sample_1_create_lead_bayut to create first lead",
    "2. Run sample_2_create_lead_website to create second lead",
    "3. Run sample_3_agent_dashboard to check agent performance",
    "4. Run sample_4_update_lead_status to update first lead",
    "5. Run sample_5_test_duplicate_error to test duplicate detection",
    "6. Run bonus_sample_invalid_budget to test data validation",
    "7. Run bonus_sample_invalid_status_transition to test status validation"
  ],
  "available_agent_ids": [
    "d7c0279d-3009-44b8-a917-2056a152fd9f",
    "b8b528dd-173f-4787-8c43-a58fac79df4d",
    "c93d7257-8832-4a1e-b6ca-019142e28c48"
  ],
  "notes": [
    "Replace {lead_id} placeholders with actual lead IDs from responses",
    "Replace {agent_id} placeholders with actual agent IDs from responses",
    "All phone numbers are unique to avoid duplicate detection conflicts",
    "Test in Swagger UI at http://localhost:8000/docs",
    "Check docker-compose ps to ensure all services are running"
  ]
}
